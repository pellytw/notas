<h1>Listado de Documentos</h1>

<table id="tabla-documentos" class="table table-striped table-bordered">
  <thead>

  <tr>
    <th>Nro Doc</th>
    <th>Tipo Doc</th>
    <th>Procedencia</th>
    <th>Destinatario</th>
    <th>Asunto</th>
    <th>Apellidos y Nombres</th>
    <th>Nro salida</th>
    <th>Fecha recepción</th>
    <th>Fecha salida</th>
    <th></th>
 
  </tr>
</thead>
<tbody>
  
<% @documentos.each do |documento| %>
<tr>
    <td><%= documento.nro_documento %></td>
    <td><%= documento.tipo_documento%></td>
    <td><%= documento.procedencia%></td>
    <td><%= documento.destinatario%></td>
    <td><%= documento.asunto%></td>
    <td><%= documento.nombres_y_apellidos%></td>
    <td><%= documento.nro_salida %></td>

    <td><%= Util.fecha_a_es(documento.fecha_recepcion) %></td>
    <td><%= Util.fecha_a_es(documento.fecha_salida) %></td>

    <td>
        <div class="btn-group">
        <a class="btn dropdown-toggle btn-primary" data-toggle="dropdown" href="#">
          Acciones
          <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><%= link_to 'Ver', documento %></li>
          <li><%= link_to 'Editar', edit_documento_path(documento) %></li>
          <li><%= link_to 'Eliminar', documento, method: :delete, data: { confirm: 'Seguro desea eliminar?' } %></li>
          <% if documento.fecha_salida != nil then %> 
            <li><a href="/documentos/dar_salida/<%=documento.id%>" target="_blank" data-confirm="¿Seguro desea dar salida a la nota?">Dar Salida</a></li> 
          <% else %>
            <li><a href="/documentos/nota/<%= documento.id%>.pdf">PDF</a></li>
          <% end %>
        </ul>
      </div>
    </td>    
  </tr>
  <% end %>        
  
</tbody>

</table>

<br/>

  <%= link_to 'Agregar Documento', new_documento_path, :class => "btn btn-success" %>


<script type="text/javascript">
$(document).ready(function($) {
  $('#tabla-documentos').dataTable({
          "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
          "sPaginationType": "bootstrap",
          "aoColumnDefs": [
            { "bSearchable": false, "aTargets": [ 6,7 ] }
          ],
          "oLanguage": {
                "sUrl": "language.es.json",
            },
            "aaSorting": [[ 0, "desc" ]],
        });
});
</script>